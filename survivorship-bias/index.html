<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survivorship Bias Revealer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Source Serif 4', serif; }
        .mono { font-family: 'Space Grotesk', sans-serif; }

        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            outline: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #1f2937;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .section-break {
            border: none;
            height: 2px;
            background: linear-gradient(to right, transparent, #d1d5db, transparent);
            margin: 2rem 0;
        }

        .dot {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: opacity 0.3s ease;
        }

        .dot.survivor { background: #10b981; opacity: 1; }
        .dot.failed { background: #6b7280; opacity: 0.3; }
        .dot.hidden { opacity: 0; }

        .toggle-btn {
            transition: all 0.2s ease;
        }
        .toggle-btn.active {
            background: #1f2937;
            color: white;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">
    <div class="max-w-3xl mx-auto px-6 py-12">
        <header class="mb-8">
            <h1 class="mono text-3xl font-bold text-stone-900 mb-2">Survivorship Bias Revealer</h1>
            <p class="text-stone-600 mono text-sm">See what you're not seeing</p>
        </header>

        <article class="space-y-6">
            <p>
                When we study successful people, companies, or strategies, we only see the <em>survivors</em>.
                The failures‚Äîwho may have done everything the same‚Äîare invisible to us.
            </p>

            <p class="text-stone-600">
                Toggle between seeing survivors only vs. the full population, and watch how the "lessons from winners" change.
            </p>

            <hr class="section-break">

            <!-- Controls -->
            <div class="bg-white rounded-xl border border-stone-200 p-6 space-y-5">
                <div>
                    <div class="flex justify-between mb-2">
                        <label class="mono text-sm font-semibold text-stone-700">Population Size</label>
                        <span id="popValue" class="mono text-sm text-stone-500">200</span>
                    </div>
                    <input type="range" id="population" class="slider" min="50" max="500" value="200" oninput="runSimulation()">
                </div>

                <div>
                    <div class="flex justify-between mb-2">
                        <label class="mono text-sm font-semibold text-stone-700">Success Rate</label>
                        <span id="successValue" class="mono text-sm text-stone-500">10%</span>
                    </div>
                    <input type="range" id="successRate" class="slider" min="1" max="50" value="10" oninput="runSimulation()">
                    <p class="text-xs text-stone-400 mt-1">What percentage make it through the filter</p>
                </div>

                <div>
                    <div class="flex justify-between mb-2">
                        <label class="mono text-sm font-semibold text-stone-700">Skill vs Luck</label>
                        <span id="skillValue" class="mono text-sm text-stone-500">50% / 50%</span>
                    </div>
                    <input type="range" id="skillLuck" class="slider" min="0" max="100" value="50" oninput="runSimulation()">
                    <p class="text-xs text-stone-400 mt-1">How much does skill (vs luck) determine success?</p>
                </div>

                <div class="pt-4 border-t border-stone-200">
                    <button onclick="runSimulation()" class="mono text-sm px-4 py-2 bg-stone-100 hover:bg-stone-200 rounded-lg">
                        Generate New Population ‚Üª
                    </button>
                </div>
            </div>

            <hr class="section-break">

            <!-- View Toggle -->
            <div class="flex justify-center gap-2 mb-4">
                <button id="btnSurvivors" class="toggle-btn mono text-sm px-4 py-2 border border-stone-300 rounded-lg active" onclick="setView('survivors')">
                    üëÅÔ∏è Survivors Only
                </button>
                <button id="btnAll" class="toggle-btn mono text-sm px-4 py-2 border border-stone-300 rounded-lg" onclick="setView('all')">
                    üëÄ Full Population
                </button>
            </div>

            <!-- Scatterplot -->
            <div class="bg-white rounded-xl border border-stone-200 p-6">
                <h2 class="mono text-lg font-semibold text-stone-900 mb-4">Skill vs Luck Distribution</h2>

                <div class="relative" style="height: 350px;">
                    <!-- Axes -->
                    <div class="absolute bottom-0 left-12 right-4 h-px bg-stone-300"></div>
                    <div class="absolute bottom-0 top-4 left-12 w-px bg-stone-300"></div>

                    <!-- Labels -->
                    <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-6 mono text-xs text-stone-500">LUCK ‚Üí</div>
                    <div class="absolute top-1/2 left-0 transform -translate-y-1/2 -rotate-90 mono text-xs text-stone-500">SKILL ‚Üí</div>

                    <!-- Plot area -->
                    <div id="scatterplot" class="absolute top-4 left-12 right-4 bottom-6 bg-stone-50 rounded overflow-hidden">
                        <!-- Dots will be injected here -->
                    </div>
                </div>

                <!-- Legend -->
                <div class="flex justify-center gap-8 mt-4">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-full bg-emerald-500"></div>
                        <span class="mono text-sm text-stone-600">Survivors</span>
                    </div>
                    <div id="failedLegend" class="flex items-center gap-2 opacity-50">
                        <div class="w-3 h-3 rounded-full bg-stone-400"></div>
                        <span class="mono text-sm text-stone-600">Failed (hidden)</span>
                    </div>
                </div>
            </div>

            <!-- Stats -->
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-emerald-50 rounded-xl p-5 border border-emerald-200">
                    <h3 class="mono text-xs text-emerald-600 uppercase mb-3">Survivors (<span id="survivorCount">20</span>)</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-sm text-emerald-700">Avg Skill</span>
                            <span id="survivorSkill" class="mono font-semibold text-emerald-800">75</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-emerald-700">Avg Luck</span>
                            <span id="survivorLuck" class="mono font-semibold text-emerald-800">82</span>
                        </div>
                    </div>
                </div>
                <div id="failedStats" class="bg-stone-100 rounded-xl p-5 border border-stone-200 opacity-50">
                    <h3 class="mono text-xs text-stone-500 uppercase mb-3">Failed (<span id="failedCount">180</span>)</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-sm text-stone-600">Avg Skill</span>
                            <span id="failedSkill" class="mono font-semibold text-stone-700">48</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-stone-600">Avg Luck</span>
                            <span id="failedLuck" class="mono font-semibold text-stone-700">45</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- The Lesson -->
            <div id="lessonBox" class="p-6 rounded-xl border-2 border-emerald-200 bg-emerald-50">
                <h3 class="mono font-semibold text-emerald-900 mb-2">The "lesson" from survivors</h3>
                <p id="lessonText" class="text-emerald-800"></p>
            </div>

            <!-- The Truth -->
            <div id="truthBox" class="p-6 rounded-xl border-2 border-stone-200 bg-stone-100 opacity-50">
                <h3 class="mono font-semibold text-stone-700 mb-2">The full picture</h3>
                <p id="truthText" class="text-stone-600"></p>
            </div>

            <hr class="section-break">

            <!-- Examples -->
            <h2 class="mono text-lg font-semibold text-stone-900">Real-world survivorship bias</h2>

            <div class="space-y-4">
                <div class="flex gap-4 items-start p-4 bg-white rounded-lg border border-stone-200">
                    <span class="text-2xl">‚úàÔ∏è</span>
                    <div>
                        <h3 class="mono font-semibold text-stone-900">WWII Bomber Armor</h3>
                        <p class="text-sm text-stone-600">Engineers wanted to add armor where returning planes had bullet holes. Statistician Abraham Wald realized: we should armor where there are NO holes‚Äîthose are the spots that caused planes not to return.</p>
                    </div>
                </div>
                <div class="flex gap-4 items-start p-4 bg-white rounded-lg border border-stone-200">
                    <span class="text-2xl">üéµ</span>
                    <div>
                        <h3 class="mono font-semibold text-stone-900">Music Industry Advice</h3>
                        <p class="text-sm text-stone-600">"Follow your passion!" say successful musicians. But for every one who made it, thousands equally passionate failed. Passion is common to survivors and failures alike‚Äîit's not what differentiated them.</p>
                    </div>
                </div>
                <div class="flex gap-4 items-start p-4 bg-white rounded-lg border border-stone-200">
                    <span class="text-2xl">üè¢</span>
                    <div>
                        <h3 class="mono font-semibold text-stone-900">Startup Success Stories</h3>
                        <p class="text-sm text-stone-600">"Move fast and break things" worked for Facebook. It also killed thousands of startups that moved fast, broke things, and ceased to exist. We don't interview them at conferences.</p>
                    </div>
                </div>
            </div>
        </article>

        <footer class="mt-12 pt-8 border-t border-stone-200 text-center">
            <a href="/" class="mono text-sm text-stone-500 hover:text-stone-700">‚Üê Back to Projects</a>
            <p class="mt-4 text-xs text-stone-400">
                Explorable format inspired by <a href="https://worrydream.com/ExplorableExplanations/" class="underline hover:text-stone-600">Bret Victor</a>
            </p>
        </footer>
    </div>

    <script>
        let population = [];
        let showAll = false;

        function generatePopulation() {
            const size = parseInt(document.getElementById('population').value);
            const successRate = parseInt(document.getElementById('successRate').value) / 100;
            const skillWeight = parseInt(document.getElementById('skillLuck').value) / 100;

            population = [];

            for (let i = 0; i < size; i++) {
                const skill = Math.random() * 100;
                const luck = Math.random() * 100;

                // Success is determined by weighted combination
                const score = skill * skillWeight + luck * (1 - skillWeight);
                const threshold = 100 * (1 - successRate);
                const survived = score > threshold;

                population.push({ skill, luck, survived });
            }
        }

        function setView(view) {
            showAll = view === 'all';
            document.getElementById('btnSurvivors').classList.toggle('active', !showAll);
            document.getElementById('btnAll').classList.toggle('active', showAll);
            document.getElementById('failedLegend').style.opacity = showAll ? '1' : '0.5';
            document.getElementById('failedStats').style.opacity = showAll ? '1' : '0.5';
            document.getElementById('truthBox').style.opacity = showAll ? '1' : '0.5';

            if (showAll) {
                document.getElementById('failedLegend').querySelector('span').textContent = 'Failed (visible)';
            } else {
                document.getElementById('failedLegend').querySelector('span').textContent = 'Failed (hidden)';
            }

            renderScatterplot();
            updateLessons();
        }

        function runSimulation() {
            // Update displays
            document.getElementById('popValue').textContent = document.getElementById('population').value;
            document.getElementById('successValue').textContent = document.getElementById('successRate').value + '%';
            const skillPct = document.getElementById('skillLuck').value;
            document.getElementById('skillValue').textContent = `${skillPct}% / ${100 - skillPct}%`;

            generatePopulation();
            renderScatterplot();
            updateStats();
            updateLessons();
        }

        function renderScatterplot() {
            const container = document.getElementById('scatterplot');
            const width = container.offsetWidth;
            const height = container.offsetHeight;

            container.innerHTML = population.map(p => {
                const x = (p.luck / 100) * (width - 20) + 10;
                const y = height - ((p.skill / 100) * (height - 20) + 10);
                const classes = p.survived ? 'dot survivor' : `dot failed ${showAll ? '' : 'hidden'}`;
                return `<div class="${classes}" style="left: ${x}px; top: ${y}px;"></div>`;
            }).join('');
        }

        function updateStats() {
            const survivors = population.filter(p => p.survived);
            const failed = population.filter(p => !p.survived);

            document.getElementById('survivorCount').textContent = survivors.length;
            document.getElementById('failedCount').textContent = failed.length;

            if (survivors.length > 0) {
                const avgSurvivorSkill = survivors.reduce((s, p) => s + p.skill, 0) / survivors.length;
                const avgSurvivorLuck = survivors.reduce((s, p) => s + p.luck, 0) / survivors.length;
                document.getElementById('survivorSkill').textContent = Math.round(avgSurvivorSkill);
                document.getElementById('survivorLuck').textContent = Math.round(avgSurvivorLuck);
            }

            if (failed.length > 0) {
                const avgFailedSkill = failed.reduce((s, p) => s + p.skill, 0) / failed.length;
                const avgFailedLuck = failed.reduce((s, p) => s + p.luck, 0) / failed.length;
                document.getElementById('failedSkill').textContent = Math.round(avgFailedSkill);
                document.getElementById('failedLuck').textContent = Math.round(avgFailedLuck);
            }
        }

        function updateLessons() {
            const survivors = population.filter(p => p.survived);
            const failed = population.filter(p => !p.survived);
            const skillWeight = parseInt(document.getElementById('skillLuck').value);

            const avgSurvivorSkill = survivors.length > 0 ? survivors.reduce((s, p) => s + p.skill, 0) / survivors.length : 0;
            const avgSurvivorLuck = survivors.length > 0 ? survivors.reduce((s, p) => s + p.luck, 0) / survivors.length : 0;

            const avgFailedSkill = failed.length > 0 ? failed.reduce((s, p) => s + p.skill, 0) / failed.length : 0;

            // The biased lesson from survivors only
            let lesson;
            if (avgSurvivorSkill > 70) {
                lesson = `"Success requires exceptional skill! Our survivors averaged ${Math.round(avgSurvivorSkill)} skill. Work harder, be better, and you'll succeed too."`;
            } else if (avgSurvivorLuck > 70) {
                lesson = `"You need to be in the right place at the right time. Our winners averaged ${Math.round(avgSurvivorLuck)} luck score. Position yourself for opportunities!"`;
            } else {
                lesson = `"The successful ones had a combination of skill (${Math.round(avgSurvivorSkill)}) and luck (${Math.round(avgSurvivorLuck)}). The key is having both."`;
            }
            document.getElementById('lessonText').textContent = lesson;

            // The truth when you see everyone
            const skillDiff = avgSurvivorSkill - avgFailedSkill;
            let truth;
            if (skillWeight < 30) {
                truth = `When luck dominates (${100 - skillWeight}%), many skilled people fail while less skilled people succeed. The "lessons from winners" are largely post-hoc rationalization. Failed people had average skill of ${Math.round(avgFailedSkill)}‚Äînot that different from survivors.`;
            } else if (skillWeight > 70) {
                truth = `With skill dominating (${skillWeight}%), survivorship bias is less severe‚Äîskill genuinely predicts success. But even here, ${failed.length} people with reasonable skill (avg ${Math.round(avgFailedSkill)}) still failed. The gap between winners and losers is smaller than it appears.`;
            } else {
                truth = `The skill gap between survivors (${Math.round(avgSurvivorSkill)}) and failures (${Math.round(avgFailedSkill)}) is only ${Math.round(skillDiff)} points. Many failures were just as skilled as many successes. What separated them? Often just luck‚Äîwhich survivors rarely mention.`;
            }
            document.getElementById('truthText').textContent = truth;
        }

        // Handle resize
        window.addEventListener('resize', () => renderScatterplot());

        // Initialize
        runSimulation();
    </script>
</body>
</html>
